<!DOCTYPE html>
<html class="scroll-smooth" lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Criar conta - Saúde++</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link rel="shortcut icon" type="image/x-icon" href="./src/icon.png" />
</head>
<body class="bg-white text-black transition-colors duration-300" id="body">
  <div class="fixed top-2 right-2 z-50">
    <button
      type="button"
      class="border border-gray-300 dark:border-gray-600 rounded-xl px-3 py-1 text-indigo-600 dark:text-indigo-300 font-semibold text-sm flex items-center justify-center w-10 sm:w-28"
      aria-label="Alternar modo noturno"
      onclick="alternarModoNoturno()"
    >
      <i id="modoIcone" class="fas fa-moon sm:mr-2"></i>
      <span id="modoTexto" class="hidden sm:inline"> Modo Noturno</span>
    </button>
  </div>

  <main class="w-full max-w-md px-4 py-12 sm:py-20 mx-auto">
    <div class="flex flex-col items-center mb-4 sm:mb-6">
      <img
        alt="Logo Saúde"
        class="rounded w-20 h-20 sm:w-32 sm:h-32"
        src="./src/logo-saude++.png"
      />
    </div>
    <h1 class="text-center text-blue-600 font-semibold text-base sm:text-lg leading-tight mb-2">
      Criar conta – Sistema Saúde++
    </h1>
    <p class="text-gray-600 dark:text-gray-300 text-center text-xs sm:text-sm mb-6 sm:mb-8">
      Preencha os dados para registrar um novo associado.
    </p>
    <form class="space-y-4 sm:space-y-6 max-w-4xl mx-auto" onsubmit="registrar(event)">
      <div>
        <label class="block mb-1 text-xs sm:text-sm font-semibold" for="nome">
          Nome completo
        </label>
        <div class="relative">
          <input
            class="w-full rounded-lg bg-gray-100 dark:bg-gray-700 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-base placeholder:text-black dark:placeholder:text-white placeholder:font-normal focus:outline-none focus:ring-2 focus:ring-blue-600"
            id="nome"
            name="nome"
            placeholder="Digite seu nome"
            type="text"
            required
          />
        </div>
      </div>

      <div>
        <label class="block mb-1 text-xs sm:text-sm font-semibold" for="email">
          E-mail
        </label>
        <div class="relative">
          <input
            class="w-full rounded-lg bg-gray-100 dark:bg-gray-700 px-3 sm:px-4 py-2 sm:py-3 pr-10 text-xs sm:text-base placeholder:text-black dark:placeholder:text-white placeholder:font-normal focus:outline-none focus:ring-2 focus:ring-blue-600"
            id="email"
            name="email"
            placeholder="exemplo@saude.com"
            type="email"
            required
          />
          <i class="fas fa-envelope absolute right-3 top-1/2 -translate-y-1/2 text-black dark:text-white text-xs sm:text-sm"></i>
        </div>
      </div>

      <div>
        <label class="block mb-1 text-xs sm:text-sm font-semibold cursor-pointer" for="cargo">
          Cargo
        </label>
        <select
          class="w-full rounded-lg bg-gray-100 dark:bg-gray-700 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-base text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-600"
          id="cargo"
          name="cargo"
          required
        >
          <option disabled selected value="">Selecione um cargo</option>
          <option value="medico">Médico</option>
          <option value="recepcionista">Recepcionista</option>
          <option value="administrativo">Administrativo</option>
        </select>
      </div>

      <div>
        <label class="block mb-1 text-xs sm:text-sm font-semibold" for="senha">
          Senha
        </label>
        <div class="relative">
          <input
            class="w-full rounded-lg bg-gray-100 dark:bg-gray-700 px-3 sm:px-4 py-2 sm:py-3 pr-14 text-xs sm:text-base placeholder:text-black dark:placeholder:text-white placeholder:font-normal focus:outline-none focus:ring-2 focus:ring-blue-600 senha-input"
            id="senha"
            name="senha"
            placeholder="Crie uma senha"
            type="password"
            required
          />
          <i class="fas fa-eye toggle-senha absolute right-8 sm:right-10 top-1/2 -translate-y-1/2 text-black dark:text-white text-xs sm:text-sm cursor-pointer"></i>
          <i class="fas fa-lock absolute right-3 top-1/2 -translate-y-1/2 text-black dark:text-white text-xs sm:text-sm"></i>
        </div>
      </div>

      <div>
        <label class="block mb-1 text-xs sm:text-sm font-semibold" for="confirmar-senha">
          Confirmar senha
        </label>
        <div class="relative">
          <input
            class="w-full rounded-lg bg-gray-100 dark:bg-gray-700 px-3 sm:px-4 py-2 sm:py-3 pr-14 text-xs sm:text-base placeholder:text-black dark:placeholder:text-white placeholder:font-normal focus:outline-none focus:ring-2 focus:ring-blue-600 senha-input"
            id="confirmar-senha"
            name="confirmar-senha"
            placeholder="Repita a senha"
            type="password"
            required
          />
          <i class="fas fa-eye toggle-senha absolute right-8 sm:right-10 top-1/2 -translate-y-1/2 text-black dark:text-white text-xs sm:text-sm cursor-pointer"></i>
          <i class="fas fa-lock absolute right-3 top-1/2 -translate-y-1/2 text-black dark:text-white text-xs sm:text-sm"></i>
        </div>
      </div>

      <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6">
        <button
          class="bg-indigo-600 text-white font-semibold rounded-lg px-4 sm:px-6 py-2 sm:py-3 w-full sm:w-auto hover:bg-indigo-700 transition-colors text-sm sm:text-base"
          type="submit"
        >
          Registrar
        </button>
        <a
          class="inline-block bg-indigo-50 dark:bg-gray-800 text-indigo-600 dark:text-indigo-300 font-semibold rounded-xl px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm w-full sm:w-auto text-center"
          href="login.html"
        >
          Já tem login? Entrar
        </a>
      </div>
    </form>
  </main>

  <script>
    // Aplica o modo noturno ou diurno com base no estado salvo
    function aplicarModo(modo) {
      const body = document.getElementById("body");
      const icone = document.getElementById("modoIcone");
      const texto = document.getElementById("modoTexto");
      const inputs = document.querySelectorAll("input, select");
      const labels = document.querySelectorAll("label");
      const paragrafos = document.querySelectorAll("p");

      if (modo === "MN") {
        // Aplica o modo noturno
        body.classList.add("bg-gray-900", "text-white", "dark");
        body.classList.remove("bg-white", "text-black");

        inputs.forEach(element => {
          element.classList.add("bg-gray-700", "text-white", "placeholder:text-white");
          element.classList.remove("bg-gray-100", "text-black", "placeholder:text-black");
        });

        labels.forEach(label => {
          label.classList.add("text-white");
          label.classList.remove("text-black");
        });

        paragrafos.forEach(paragrafo => {
          paragrafo.classList.add("text-white");
          paragrafo.classList.remove("text-gray-600", "dark:text-gray-300", "text-black");
        });

        icone.classList.add("fa-sun");
        icone.classList.remove("fa-moon");
        texto.textContent = " Modo Claro";
      } else {
        // Aplica o modo diurno
        body.classList.add("bg-white", "text-black");
        body.classList.remove("bg-gray-900", "text-white", "dark");

        inputs.forEach(element => {
          element.classList.add("bg-gray-100", "text-black", "placeholder:text-black");
          element.classList.remove("bg-gray-700", "text-white", "placeholder:text-white");
        });

        labels.forEach(label => {
          label.classList.add("text-black");
          label.classList.remove("text-white");
        });

        paragrafos.forEach(paragrafo => {
          paragrafo.classList.add("text-gray-600");
          paragrafo.classList.remove("text-white", "dark:text-gray-300");
        });

        icone.classList.add("fa-moon");
        icone.classList.remove("fa-sun");
        texto.textContent = " Modo Noturno";
      }

      console.log("Modo aplicado:", modo);
    }

    // Alterna entre modo noturno e diurno
    function alternarModoNoturno() {
      const modoAtual = localStorage.getItem("modo") || "MD";
      const novoModo = modoAtual === "MD" ? "MN" : "MD";
      aplicarModo(novoModo);
      localStorage.setItem("modo", novoModo);
    }

    // Carrega o modo salvo ao iniciar a página
    document.addEventListener("DOMContentLoaded", () => {
      const modoSalvo = localStorage.getItem("modo") || "MD";
      aplicarModo(modoSalvo);
    });

    // Alterna a visibilidade da senha
    document.querySelectorAll(".toggle-senha").forEach(btn => {
      btn.addEventListener("click", () => {
        const input = btn.parentElement.querySelector(".senha-input");
        const isPassword = input.type === "password";
        input.type = isPassword ? "text" : "password";
        btn.classList.toggle("fa-eye");
        btn.classList.toggle("fa-eye-slash");
      });
    });

    // Registra o usuário e salva os dados
    function registrar(event) {
      event.preventDefault();
      const nome = document.getElementById("nome").value;
      const email = document.getElementById("email").value;
      const cargo = document.getElementById("cargo").value;
      const senha = document.getElementById("senha").value;
      const confirmar = document.getElementById("confirmar-senha").value;

      if (senha !== confirmar) {
        alert("As senhas não coincidem.");
        return;
      }

      const usuario = {
        nome,
        email,
        cargo,
        foto: "" // URL futura para foto
      };
      localStorage.setItem("usuario", JSON.stringify(usuario));

      // Verifica se o cargo é administrativo
      if (cargo === "administrativo") {
        window.location.href = "dashboard.html";
      } else {
        alert("Acesso ao dashboard permitido apenas para cargos administrativos.");
        window.location.href = "https://saulo-ferro-maciel.github.io/SaudePlus/";
      }
    }
  </script>
</body>
          </html>
